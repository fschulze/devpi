<!doctype html>
<html>
    <head>
        <title>${title}</title>
        <metal:macros use-macro="macros.render_group('html_head')" />
    </head>
    <body>
        <metal:header use-macro="macros.header" />
        <div id="content">
        <h1>${title}</h1>

        <div tal:repeat="toxresult toxresults"
             tal:attributes="class 'toxresult %s' % toxresult.status">
            <h2 class="toxresult_title" id="${toxresult._key}">
                ${toxresult.host} ${toxresult.platform} ${toxresult.envname} ${toxresult.get('pyversion')}
            </h2>
            <div id="${toxresult._key}-setup" class="command" tal:condition="not toxresult.setup.commands">No setup performed</div>
            <div
                tal:condition="toxresult.setup.commands"
                tal:repeat="command toxresult.setup.commands"
                tal:attributes="class 'command ' + ('failed' if command.failed else 'passed')"
                id="${toxresult._key}-setup">
                <h3>Setup command:</h3>
                <pre>${command.command}</pre>
                <h3>Setup output:</h3>
                <pre>${command.output}</pre>
            </div>
            <div id="${toxresult._key}-test" class="command" tal:condition="not toxresult.test.commands">No test run</div>
            <div
                tal:condition="toxresult.test.commands"
                tal:repeat="command toxresult.test.commands"
                tal:attributes="class 'command ' + ('failed' if command.failed else 'passed')">
                <h3>Test command:</h3>
                <pre>${command.command}</pre>
                <h3>Test output:</h3>
                <pre>${command.output}</pre>
            </div>
        </div>
        <metal:footer use-macro="macros.footer" />
    </body>
</html>
